{"version":3,"sources":["index.js"],"names":[],"mappings":";;AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,IAAP,MAAiB,MAAjB;AACA,OAAO,OAAP,MAAoB,gBAApB;AACA,OAAO,SAAP,MAAsB,aAAtB;;AAEA;;;;;;;;;AASA,IAAI,GAAJ,CAAQ,IAAR;AACA;AACA,eAAe,IAAI,KAAK,KAAT,CAAe;AAC5B,SAAM;AACJ,UAAK,IADD,EACW;AACf,eAAU,EAFN,EAEW;AACf,eAAU,EAHN,EAGW;AACf,YAAO;AAJH,GADsB;;AAS5B,aAAU;AACR;;;;;;AAMA,eAPQ,uBAOI,KAPJ,EAOU,OAPV,EAOkB;AACxB,YAAM,SAAN,CAAgB,IAAhB,CAAqB,OAArB;AACD,KATO;;;AAWR;;;;;AAKA,kBAhBQ,0BAgBO,KAhBP,EAgBc,OAhBd,EAgBsB;AAC5B,YAAM,SAAN,CAAgB,QAAQ,KAAxB,IAAiC,QAAQ,QAAzC;AACD,KAlBO;;;AAoBR;;;;;AAKA,eAzBQ,uBAyBI,KAzBJ,EAyBU,EAzBV,EAyBa;AACnB,YAAM,SAAN,GAAkB,MAAM,SAAN,CAAgB,MAAhB,CAAuB;AAAA,eAAI,GAAG,GAAH,KAAW,EAAf;AAAA,OAAvB,CAAlB;AACD,KA3BO;;;AA6BR;;;;;AAKA,gBAlCQ,wBAkCK,KAlCL,EAkCW,OAlCX,EAkCmB;AACzB,YAAM,SAAN,CAAgB,IAAhB,CAAqB,OAArB;AACD,KApCO;;;AAsCR;;;;AAIA,cA1CQ,sBA0CG,KA1CH,EA0CS;AACf,YAAM,MAAN,GAAe,IAAf;AACD;AA5CO,GATkB;;AAyD5B,WAAQ;AACN;;;;AAIA;;;;;AAKM,iBAVA,+BAUuC,MAVvC,EAU+C;AAAA;;AAAA,UAAhC,MAAgC,QAAhC,MAAgC;AAAA,UAAzB,QAAyB,QAAzB,QAAyB;AAAA,UAAhB,KAAgB,QAAhB,KAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAChD,MAAM,MAD0C;AAAA;AAAA;AAAA;;AAAA,iDAC5B,KAD4B;;AAAA;AAAA;AAAA,uBAElC,QAAQ,aAAR,CAAsB,MAAtB,CAFkC;;AAAA;AAE/C,oBAF+C;;AAGnD,qBAAK,OAAL,CAAa;AAAA,yBAAI,OAAO,aAAP,EAAqB,EAArB,CAAJ;AAAA,iBAAb;AACA,uBAAO,YAAP;AAJmD,iDAK5C,IAL4C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMpD,KAhBK;;;AAkBN;;;;;AAKM,mBAvBA,kCAuByB,SAvBzB,EAuBmC;AAAA;;AAAA,UAAlB,MAAkB,SAAlB,MAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnC,kBADmC,GAC9B,EAD8B;AAEvC;AACA;;AACA,qBAAQ,IAAR,IAAgB,UAAU,SAAV,CAAhB,EAAsC;AACpC,qBAAG,IAAH,IAAW,UAAU,SAAV,EAAqB,IAArB,CAAX;AACD;;AANsC;AAAA,uBAQxB,QAAQ,YAAR,CAAqB,EAArB,CARwB;;AAAA;AAQnC,kBARmC;;AAAA,sBASpC,MAAM,OAAO,CATuB;AAAA;AAAA;AAAA;;AAUrC,mBAAG,GAAH,GAAS,EAAT;AACA,uBAAO,aAAP,EAAsB,EAAtB;AAXqC,kDAY9B,EAZ8B;;AAAA;AAAA,kDAc3B,KAd2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAexC,KAtCK;;;AAwCN;;;;;;AAMA,kBA9CM,iCA8CwB,QA9CxB,EA8CiC;AAAA,UAAvB,MAAuB,SAAvB,MAAuB;AAAA,UAAhB,KAAgB,SAAhB,KAAgB;;AACrC,WAAI,IAAI,IAAI,CAAZ,EAAc,IAAI,MAAM,SAAN,CAAgB,MAAlC,EAAyC,GAAzC,EAA8C;AAC5C,YAAG,MAAM,SAAN,CAAgB,CAAhB,EAAmB,GAAnB,KAA2B,SAAS,GAAvC,EAA2C;AACzC,cAAG,QAAQ,eAAR,CAAwB,SAAS,GAAjC,EAAqC,QAArC,CAAH,EACE,OAAO,gBAAP,EAAwB,EAAC,UAAS,QAAV,EAAoB,OAAM,CAA1B,EAAxB,EADF,KAEK;AACH;AACD;AACF;AACF;AAEF,KAzDK;;;AA2DN;;;;;AAKM,kBAhEA,iCAgEwB,EAhExB,EAgE2B;AAAA;;AAAA,UAAX,MAAW,SAAX,MAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACf,QAAQ,eAAR,CAAwB,EAAxB,CADe;;AAAA;AAC3B,mBAD2B;;AAAA,qBAE5B,GAF4B;AAAA;AAAA;AAAA;;AAG7B,uBAAO,aAAP,EAAsB,EAAtB;AAH6B,kDAItB,IAJsB;;AAAA;AAAA,kDAMnB,KANmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOhC,KAvEK;;;AAyEN;;;;;AAKA;;;;;AAKA,iBAnFM,gCAmFiB,MAnFjB,EAmFwB;AAAA,UAAf,MAAe,SAAf,MAAe;AAAE,KAnF1B;;;AAqFN;;;;;AAKA,gBA1FM,+BA0FgB,IA1FhB,EA0FqB;AAAA,UAAb,MAAa,SAAb,MAAa;AAAE;AA1FvB;AAzDoB,CAAf,CAAf","file":"index-compiled.js","sourcesContent":["import Vue from 'vue'\nimport Vuex from \"vuex\"\nimport connect from \"@/libs/connect\"\nimport templates from \"@/templates\"\n\n/**\n * Основные переменные состояния\n * =============================\n * Здесь содержится инструментарий для работы с двумя главными элементами приложения\n * - упражнениями\n * - статистикой\n * Здесь содержатся данные, методы загрузки, сохранения и изменения\n */\n\nVue.use(Vuex);\n// noinspection JSUnusedGlobalSymbols\nexport default new Vuex.Store({\n  state:{\n    test:true,     // Данные для проверки\n    exercises:[],  // Список задангий\n    statistic:[],  // Статистика\n    loaded:false\n  },\n\n\n  mutations:{\n    /**\n     * Мутация добавления нового упражнения.\n     * TODO Возможно потребуются вспомогательные операции\n     * @param state\n     * @param payload\n     */\n    addExercise(state,payload){\n      state.exercises.push(payload)\n    },\n\n    /**\n     * Внесение изменения в существующее упражнение\n     * @param state\n     * @param payload\n     */\n    updateExercise(state, payload){\n      state.exercises[payload.index] = payload.settings\n    },\n\n    /**\n     * Удаление упражнения\n     * @param state\n     * @param id\n     */\n    delExercise(state,id){\n      state.exercises = state.exercises.filter(el=>el._id !== id)\n    },\n\n    /**\n     * Добавление новой записи статистики\n     * @param state\n     * @param payload\n     */\n    addStatistic(state,payload){\n      state.statistic.push(payload)\n    },\n\n    /**\n     * Указание, что данные загружены и сервера\n     * @param state\n     */\n    dataLoaded(state){\n      state.loaded = true\n    }\n  },\n\n\n  actions:{\n    /**\n     * Упражнения\n     * ----------\n     */\n    /**\n     * Загрузка с сервера упражнений по набору условий\n     * @param context\n     * @param params\n     */\n    async loadExercises({commit,dispatch,state}, params) {\n      if(state.loaded)return false;\n      let data = await connect.loadExercises(params);\n      data.forEach(el=>commit(\"addExercise\",el));\n      commit(\"dataLoaded\");\n      return true;\n    },\n\n    /**\n     * Сохранение нового упражнения на сервер и внесение его локально\n     * @param commit\n     * @param component\n     */\n    async saveNewExercise({commit},component){\n      let el = {};\n      // Клонирование объекта, хоть не красиво -\n      // единственный способ получить рабочую схему\n      for(let name in templates[component]) {\n        el[name] = templates[component][name]\n      }\n\n      let id = await connect.saveExercise(el);\n      if(id || id === 0) {\n        el._id = id;\n        commit(\"addExercise\", el);\n        return id;\n      }\n      else return false;\n    },\n\n    /**\n     * Обновление существующего упражнения\n     * @param commit\n     * @param state\n     * @param settings\n     */\n    updateExercise({commit,state},settings){\n      for(let i = 0;i < state.exercises.length;i ++){\n        if(state.exercises[i]._id === settings._id){\n          if(connect.updateExercises(settings._id,settings))\n            commit(\"updateExercise\",{settings:settings, index:i})\n          else {\n            //TODO Обработка ошибки сохранения\n          }\n        }\n      }\n\n    },\n\n    /**\n     * Удаление упражнения по его _id\n     * @param commit\n     * @param id\n     */\n    async deleteExercise({commit},id){\n      let acc = await connect.deleteExercises(id);\n      if(acc) {\n        commit(\"delExercise\", id);\n        return true\n      }\n      else return false;\n    },\n\n    /**\n     * Статистика\n     * ----------\n     */\n\n    /**\n     * Загрузка статистики по условиям\n     * @param commit\n     * @param params\n     */\n    loadStatistic({commit},params){},\n\n    /**\n     * Добавление новой записи статистики\n     * @param commit\n     * @param stat\n     */\n    addStatistic({commit},stat){}\n  }\n})\n"]}